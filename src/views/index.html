<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>My App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    
    <h1>Pegar Geolocalização</h1>

    <p>
        latitude: <span id="latitude" name="latitude"></span>&deg;<br/>
        longitude: <span id="longitude" name="longitude"></span>&deg;<br/>
    </p>
  </body>

  <script>
      if ("geolocation" in navigator) {
        console.log("Geolocalização está disponível");
        navigator.geolocation.getCurrentPosition( async position => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;

            document.getElementById('latitude').textContent = lat;
            document.getElementById('longitude').textContent = lon;

            //console.log(position);
            const data = {lat, lon};
            const options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*'

                },
                body: JSON.stringify(data)
            };
            const response = await fetch('/teste', options);
            const jsonData = await response.json();
            console.log(jsonData);
        });
      } else {
        console.log("Geolocalização não está disponível");
      }
    </script>

</html>
